{% extends 'layouts/base.html' %}
{% load static %}

{% block title-description %}Home{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{% static '/styles/pages/index.css' %}">
<link rel="stylesheet" href="{% static '/styles/components/product.css' %}">
{% endblock %}

{% block body %}
{% include 'components/navigation.html' %}
	<div class="container">
		<section class="section">
			<p class="section__label">
				Kategorie
			</p>
			<div class="category-list">
				{% for category in categories %}
					<div class="category">
						<a href="{% url 'web:index' %}?category={{ category.name }}">
							<div class="category__decorator">
							</div>
							<p class="category__name">{{ category.name }}</p>
						</a>
					</div>
				{% endfor %}
			</div>
		</section>
		<section class="section">
			<header class="header">
				<form class="search">
					<input 
						class="search__input" 
						type="text"
						name="q"
						value="{{ search_query }}"
						placeholder="Imię, nazwisko autora lub tytuł"
						required 
					/>
					<button class="search__submit" type="submit">Wyszukaj</button>
				</form>
				{% if not use_search %}
					<div class="banner"></div>
				{% endif %}
			</header>
			<section class="section">
				{% if use_search %}
					{% if products %}
						<div class="product-list">
							{% for product in products %}
								{% include 'components/product.html' with title=product.title author=product.author.username price=product.price cover_img_url=product.cover_img_url id=product.id %}
							{% endfor %}
						</div>
					{% else %}
						<h1 class="search-not-found">Nie znaleziono produktu którego szukasz</h1>
					{% endif %}
					{% else %}
					{% if products %}
						<div class="product-list">
							{% for product in products %}
								{% include 'components/product.html' with title=product.title author=product.author.username price=product.price cover_img_url=product.cover_img_url id=product.id %}
							{% endfor %}
						</div>
					{% else %}
						<h1 class="search-not-found">Nie znaleziono produktu którego szukasz</h1>
					{% endif %}
				{% endif %}
			</section>
		</section>
	</div>
{% include 'components/bigfooter.html' %}
{% endblock %}
