{% extends 'layouts/base.html' %}
{% load static %}

{% block title-description %}Koszyk {% if 'cart' in request.session %}({{ request.session.cart.item_count }})
{% else %}(0){% endif %}{% endblock %}

{% block page_class_name %}p-cart{% endblock %}

{% block body %}
{% if products %}
{% include 'components/share_cart_popup.html' %}
{% endif %}
{% if request.user.is_authenticated and products %}
{% include 'components/save_cart_popup.html'%}
{% endif %}
{% include 'components/navigation.html' %}
<div class="wrapper">
	<div class="section flex-center">
		<div class="step flex-center step-current">
			<figure class="flex-center">
				<span class="h2">1</span>
			</figure>
			<span class="h2">Koszyk</span>
		</div>
		<div class="step-separator"></div>
		<div class="step flex-center">
			<figure class="flex-center">
				<span class="h2">2</span>
			</figure>
			<span class="h2">Wysy≈Çka</span>
		</div>
		<div class="step-separator"></div>
		<div class="step flex-center">
			<figure class="flex-center">
				<span class="h2">3</span>
			</figure>
			<span class="h2">P≈Çatno≈õƒá</span>
		</div>
	</div>
	<div class="flex-center" style="min-height: calc(100vh - 258.2px);">
		<div class="section">
			<div class="section" style="margin-top: 2rem;">
				<p class="section__title">Lista produkt√≥w</p>
				{% if products %}
				{% for product in products %}
				<div class="cart-items">
					<div class="product">
						<div class="flex-center">
							<input type="checkbox" checked />
						</div>
						<img src="{{ product.cover_img.url }}" />
						<div class="product__details">
							<div>
								<h3 class="product__title">{{ product.title }}</h3>
								<p class="product__author">{{ product.author }}</p>
							</div>
							<div>
								<p class="product__price">{{ product.price }} z≈Ç</p>
							</div>
						</div>
						<i class="fas fa-times h2 product__delete"></i>
					</div>
				</div>
				{% endfor %}
				{% else %}
				<div class="empty-cart flex-center">
					<p class="h2">Tw√≥j koszyk jest pusty üòØ</p>
				</div>
				{% endif %}
			</div>
			<div class="cart-details">
				<div>
					{% if products %}
					<button id="open-share-cart-popup" class="btn btn__primary">Udostƒôpnij</button>
					{% else %}
					<button class="btn btn__disabled">Udostƒôpnij</button>
					{% endif %}
					{% if request.user.is_authenticated and products %}
					<button id="show-save-cart-popup" class="btn btn__primary">Zapisz</button>
					{% endif %}
				</div>
				<div>
					{% if 'cart' in request.session %}
					<p>Razem: {{ request.session.cart.total_price }} z≈Ç</p=>
						{% else %}
						<p>Razem: 0.00 z≈Ç</p>
						<a class="btn btn__disabled" href="{% url 'web:cart-delivery' %}">Przejd≈∫ dalej</a>
						{% endif %}
				</div>
			</div>
		</div>
	</div>
</div>
{% include 'components/small-footer-light.html' %}
{% endblock %}